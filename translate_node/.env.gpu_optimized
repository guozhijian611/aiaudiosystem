# GPU优化配置 - 适用于显存较小的GPU
# 复制此文件为 .env 使用

# RabbitMQ配置
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VIRTUAL_HOST=/

# 队列配置
QUEUE_NAME=transcribe_queue

# 后端API配置
API_BASE_URL=http://localhost:8787
API_UPLOAD_ENDPOINT=/queue/upload
API_CALLBACK_ENDPOINT=/queue/callback

# 工作目录配置
WORK_DIR=./work
TEMP_DIR=./temp
LOG_LEVEL=INFO

# WhisperX转写配置 - GPU优化
WHISPER_MODEL=large-v3
WHISPER_LANGUAGE=auto
WHISPER_DEVICE=auto
WHISPER_COMPUTE_TYPE=auto
WHISPER_BATCH_SIZE=4

# 功能开关 - 为节省内存，禁用部分功能
ENABLE_ALIGNMENT=false
ENABLE_DIARIZATION=false

# 说话人分离配置（已禁用）
DIARIZATION_MODEL=pyannote/speaker-diarization-3.1
HF_TOKEN=
MIN_SPEAKERS=1
MAX_SPEAKERS=10

# 对齐模型配置（已禁用）
ALIGNMENT_MODEL=WAV2VEC2_ASR_LARGE_LV60K_960H

# 处理限制 - 优化内存使用
MAX_AUDIO_DURATION=1800
PROCESSING_TIMEOUT=7200
CHUNK_DURATION=180

# 输出格式
OUTPUT_FORMAT=json
INCLUDE_TIMESTAMPS=true
INCLUDE_CONFIDENCE=true

# 模型缓存
MODEL_CACHE_DIR=./models
DISABLE_UPDATE=true

# 队列配置
QUEUE_TTL=3600000
QUEUE_DURABLE=true

# 其他配置
MAX_WORKERS=1
DOWNLOAD_TIMEOUT=300

# WhisperX路径
WHISPERX_PATH=./whisperX 